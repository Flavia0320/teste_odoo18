<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="sale_contract_form" model="ir.ui.view">
            <field name="name">sale.order.inherit.contract</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
            	<field name="partner_shipping_id" position="after">
            		<field name="contract_id" domain="[('partner_id.id','=',partner_id)]" context="{'partner_id':partner_id}" readonly="state in ['sale','done']" invisible="1"/>
            	</field>
                <xpath expr="//button[@name='action_cancel']" position="after">
                    <button string="Creare contract" name="action_create_contract" type="object" invisible="contract_id != False"/>
                     <button name="action_send_contract_via_message_compose"
                        type="object"
                        string="Trimite Contract"
                        />
                </xpath>
                <div name="button_box" position="inside">
                    <button class="oe_stat_button" type="object"
                            name="action_open_smart_contract"
                            icon="fa-file" string="Contracte" invisible="contract_id == 0">
                    </button>
                </div>

            </field>
    </record>

    <template id="sale_order_portal_id" name="sale_order_portal" inherit_id="sale.sale_order_portal_template">
        <xpath expr="//div[hasclass('o_download_pdf')]" position="inside">
            <a class="btn btn-secondary ms-1 mb-1"
               t-att-href="'/report/pdf/smart_contract.smart_contract_pdf_report/%s' % (sale_order.contract_id.id)"
               target="_blank">
                DescarcÄƒ contract
            </a>
        </xpath>
    </template>
</odoo>